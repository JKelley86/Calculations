<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secret Santa Generator</title>
    <style>
        /* Festive Styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f0ff;
            text-align: center;
        }
        h1 {
            color: #d32f2f;
            font-size: 2.5em;
            margin: 20px;
        }
        button {
            padding: 10px 20px;
            margin: 10px;
            background-color: #388e3c;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        input {
            padding: 10px;
            font-size: 1em;
            margin: 10px;
        }
        #setup, #play, #assignedPerson {
            display: none;
        }
    </style>
</head>
<body>
    <h1>Secret Santa Generator</h1>
    <div id="setup">
        <h2>Enter Participants</h2>
        <input type="text" id="participantName" placeholder="Enter participant name">
        <input type="text" id="partnerName" placeholder="Enter partner's name (optional)">
        <button id="addParticipantButton">Add Participant</button>
        <ul id="participantsList"></ul>
        <button id="startButton">Start Secret Santa</button>
    </div>

    <div id="play">
        <h2>Assignments</h2>
        <input type="text" id="viewerName" placeholder="Enter your name to see your assignment">
        <button id="viewAssignmentButton">View Assignment</button>
    </div>

    <div id="assignedPerson">
        <h3>You're assigned to: <span id="assignedName"></span></h3>
        <button id="backButton">Back</button>
    </div>

    <script>
        let participants = [];
        let assignments = [];

        // Add participant with optional partner
        document.getElementById("addParticipantButton").addEventListener("click", function () {
            const name = document.getElementById("participantName").value.trim();
            const partner = document.getElementById("partnerName").value.trim();

            if (name) {
                participants.push({ name, partner, assigned: null });
                document.getElementById("participantsList").innerHTML += `<li>${name} (Partner: ${partner || "None"})</li>`;
            }

            document.getElementById("participantName").value = "";
            document.getElementById("partnerName").value = "";
        });

        // Start Secret Santa
        document.getElementById("startButton").addEventListener("click", function () {
            assignSecretSanta();
        });

        // Secret Santa assignment
        function assignSecretSanta() {
            let success = false;
            while (!success) {
                participants.forEach(p => p.assigned = null);
                const shuffled = [...participants].sort(() => Math.random() - 0.5);
                success = true;

                for (let i = 0; i < participants.length; i++) {
                    const santa = participants[i];
                    const recipient = shuffled[i];
                    if (santa.name === recipient.name || santa.partner === recipient.name) {
                        success = false;
                        break;
                    }
                    santa.assigned = recipient.name;
                }
            }

            alert("Secret Santa assignments complete!");
            document.getElementById("setup").style.display = "none";
            document.getElementById("play").style.display = "block";

            assignments = participants.reduce((acc, p) => ({ ...acc, [p.name]: p.assigned }), {});
        }

        // View individual assignment
        document.getElementById("viewAssignmentButton").addEventListener("click", function () {
            const viewerName = document.getElementById("viewerName").value.trim();
            const assignedTo = assignments[viewerName];

            if (assignedTo) {
                document.getElementById("assignedName").textContent = assignedTo;
                document.getElementById("play").style.display = "none";
                document.getElementById("assignedPerson").style.display = "block";
            } else {
                alert("Name not found, please try again.");
            }
        });

        // Back button
        document.getElementById("backButton").addEventListener("click", function () {
            document.getElementById("viewerName").value = "";
            document.getElementById("assignedPerson").style.display = "none";
            document.getElementById("play").style.display = "block";
        });
    </script>
</body>
</html>
